{
	"source": "http://www.chessvariants.org/other.dir/amazons.html",
	"boards": {
		"standard": {
			"shape": "square",
			"height": 10,
			"width": 10
		}
	},
	"setups": {
		"standard": [
			{"x":4,"y":1,"plr":1},{"x":7,"y":1,"plr":1},{"x":1,"y":4,"plr":1},{"x":10,"y":4,"plr":1},
			{"x":4,"y":10,"plr":1},{"x":7,"y":10,"plr":1},{"x":1,"y":7,"plr":1},{"x":10,"y":7,"plr":1}
		]
	},
	"queries": {
		"blocks": ["MERGE","UNITS",{},"TERRAIN",{}]
	},
	"marks": {
		"selectunit": {
			"condition": ["DIFFERENT",["TURNVAR","moved"],true],
			"from": "MYUNITS"
		},
		"selectmove": "movetarget",
		"selectfire": "firetarget"
	},
	"endturn": {
		"condition":["SAME",["TURNVAR","fired"],true],
		"commandcap": true,
		"passto": ["IFELSE",["SAME",["TURNVAR","CURRENTPLAYER"],1],2,1]
	},
	"endgame": {
		"blocked":[["EMPTY","enemymove"],["TURNVAR","CURRENTPLAYER"]]
	},
	"commands": {
		"move": [
			["MOVEUNIT",["IDAT","selectunit"],"selectmove"],
			["SETTURNVAR","moved",true],
			["SETTURNPOS","movedto","selectunit"]
		],
		"fire": [
			["CREATETERRAIN","selectfire",{"type":"fire"}],
			["SETTURNVAR","fired",true]
		]
	},
	"generators": {
		"movetarget": {
			"type": "walker",
			"frompos": "selectunit",
			"dirs": [1,2,3,4,5,6,7,8],
			"stops": "blocks",
			"stepname": "movetarget"
		},
		"firetarget": {
			"type": "walker",
			"frompos": ["TURNPOS","movedto"],
			"dirs": [1,2,3,4,5,6,7,8],
			"stops": "blocks",
			"stepname": "firetarget"
		},
		"enemymoves": {
			"type": "walker",
			"fromquery": "OPPUNITS",
			"dirs": [1,2,3,4,5,6,7,8],
			"stops": "blocks",
			"stepname": "enemymove"
		}
	}
}