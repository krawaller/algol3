{
	"source": "http://www.di.fc.ul.pt/~jpn/gv/daggers.htm",
	"boards": {
		"standard": {
			"shape": "square",
			"height": 8,
			"width": 8,
			"terrain": [
				{"x":1,"y":1,"type":"base","plr":1},{"x":2,"y":1,"type":"base","plr":1},{"x":3,"y":1,"type":"base","plr":1},{"x":4,"y":1,"type":"base","plr":1},{"x":5,"y":1,"type":"base","plr":1},{"x":6,"y":1,"type":"base","plr":1},{"x":7,"y":1,"type":"base","plr":1},{"x":8,"y":1,"type":"base","plr":1},
				{"x":1,"y":8,"type":"base","plr":2},{"x":2,"y":8,"type":"base","plr":2},{"x":3,"y":8,"type":"base","plr":2},{"x":4,"y":8,"type":"base","plr":2},{"x":5,"y":8,"type":"base","plr":2},{"x":6,"y":8,"type":"base","plr":2},{"x":7,"y":8,"type":"base","plr":2},{"x":8,"y":8,"type":"base","plr":2}
			]
		}
	},
	"setups": {
		"standard": [
			{"x":4,"y":1,"plr":1,"type":"crown"},{"x":5,"y":1,"plr":1,"type":"crown"},
			{"x":3,"y":2,"plr":1,"type":"dagger"},{"x":4,"y":2,"plr":1,"type":"dagger"},{"x":5,"y":2,"plr":1,"type":"dagger"},{"x":6,"y":2,"plr":1,"type":"dagger"},
			{"x":3,"y":8,"plr":2,"type":"crown"},{"x":6,"y":8,"plr":2,"type":"crown"},
			{"x":2,"y":7,"plr":2,"type":"dagger"},{"x":3,"y":7,"plr":2,"type":"dagger"},{"x":4,"y":7,"plr":2,"type":"dagger"},{"x":5,"y":7,"plr":2,"type":"dagger"},{"x":6,"y":7,"plr":2,"type":"dagger"},{"x":7,"y":7,"plr":2,"type":"dagger"},
			{"x":3,"y":6,"plr":2,"type":"dagger"},{"x":6,"y":6,"plr":2,"type":"dagger"}
		]
	},
	"queries": {
		"myunits": ["FILTER","UNITS",{"plr":["IS",["TURNVAR","CURRENTPLAYER"]]}],
		"oppunits": ["FILTER","UNITS",{"plr":["ISNT",["TURNVAR","CURRENTPLAYER"]]}],
		"mycrowns": ["FILTER","myunits",{"type":["IS","crown"]}],
		"mydaggers": ["FILTER","myunits",{"type":["IS","dagger"]}],
		"oppcrowns": ["FILTER","oppunits",{"type":["IS","crown"]}],
		"opponentbase": ["FILTER","TERRAIN",{"type":["IS","base"],"plr":["ISNT",["TURNVAR","CURRENTPLAYER"]]}],
		"killedoppcrown": ["FILTER","DEADUNITS",{"type":["IS","crown"],"plr":["ISNT",["TURNVAR","CURRENTPLAYER"]]}],
		"infiltrators": ["MERGE","myunits","opponentbase",{"id":"id"},{}],
		"moves": ["FILTER","movetarget",{"id":["IS",["LOOKUP","myunits","selectunit","id"]]}],
		"kills": ["FILTER","killtarget",{"id":["IS",["LOOKUP","myunits","selectunit","id"]]}]
	},
	"endturn": {
		"condition":["SAME",["TURNVAR","mademove"],true],
		"commandcap": true,
		"passto": ["IFELSE",["SAME",["TURNVAR","CURRENTPLAYER"],1],2,1]
	},
	"endgameconditions": {
		"infiltration":[["NOTEMPTY","infiltrators"],["TURNVAR","CURRENTPLAYER"]],
		"kingkill":[["NOTEMPTY","killedoppcrown"],["TURNVAR","CURRENTPLAYER"]]
	},
	"marks": {
		"selectunit": "myunits",
		"selectmovetarget": "moves",
		"selectkilltarget": "kills"
	},
	"commands": {
		"move": {
			"effects": [
				["MOVEUNIT",["LOOKUP","myunits","selectunit","id"],"selectmovetarget"],
				["SETTURNVARIABLE","mademove",true]
			]
		},
		"kill": {
			"effects":[
				["MOVEUNIT",["LOOKUP","myunits","selectunit","id"],"selectmovetarget"],
				["KILLUNIT",["LOOKUP","oppunits","selectkilltarget","id"]],
				["SETTURNVARIABLE","mademove",true]
			]
		}
	},
	"generators": {
		"nexttocrown": {
			"type": "offset",
			"from": "mycrowns",
			"dirs": [1,2,3,4,5,6,7,8],
			"forward": 1,
			"name": ["IFELSE",["ANYAT","oppunits","TARGET"],"killtarget",["IFNOT",["ANYAT","myunits","TARGET"],"movetarget"]],
			"include": {"id":["LOOKUP","mycrowns","START","id"]}
		},
		"abovedagger": {
			"type": "offset",
			"from": "mydaggers",
			"dirs": [8,1,2],
			"instructions": [{
				"forward": 1,
				"name": ["IFELSE",["ANYAT","oppunits","TARGET"],
					["IF",["OR",["ANYAT","oppcrowns","TARGET"],["ONEOF",["ARTIFACT","dir"],[8,2]]],"killtarget"],
					["IFNOT",["ANYAT","myunits","TARGET"],"movetarget"]
				]
			}],
			"include": {"id":["LOOKUP","mycrowns","START","id"]}
		},
		"belowdagger": {
			"type": "walker",
			"from": "mydaggers",
			"dirs": [4,5,6],
			"stops": "UNITS",
			"stepname": "movetarget",
			"stopname":  ["IF",["OR",["ANYAT","oppcrowns","TARGET"],["AND",["ANYAT","oppunits","TARGET"],["ONEOF",["ARTIFACT","dir"],[4,6]]]],"killtarget"],
			"include": {"id":["LOOKUP","mycrowns","START","id"]}
		}
	}
}