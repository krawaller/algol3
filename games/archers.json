{
	"source": "http://www.di.fc.ul.pt/~jpn/gv/Archers.pdf",
	"boards": {
		"standard": {
			"shape": "square",
			"height": 9,
			"width": 9,
			"terrain": [
				{"x":2,"y":2,"type":"base","plr":1},{"x":3,"y":2,"type":"base","plr":1},{"x":4,"y":2,"type":"base","plr":1},
				{"x":2,"y":3,"type":"base","plr":1},{"x":3,"y":3,"type":"base","plr":1},{"x":4,"y":3,"type":"base","plr":1},
				{"x":2,"y":4,"type":"base","plr":1},{"x":3,"y":4,"type":"base","plr":1},{"x":4,"y":4,"type":"base","plr":1},
				{"x":6,"y":6,"type":"base","plr":2},{"x":7,"y":6,"type":"base","plr":2},{"x":8,"y":6,"type":"base","plr":2},
				{"x":6,"y":7,"type":"base","plr":2},{"x":7,"y":7,"type":"base","plr":2},{"x":8,"y":7,"type":"base","plr":2},
				{"x":6,"y":8,"type":"base","plr":2},{"x":7,"y":8,"type":"base","plr":2},{"x":8,"y":8,"type":"base","plr":2}
			]
		}
	},
	"setups": {
		"standard": [
			{"x":2,"y":2,"type":"archer","plr":1},{"x":3,"y":2,"type":"archer","plr":1},{"x":4,"y":2,"type":"archer","plr":1},
			{"x":2,"y":3,"type":"archer","plr":1},{"x":3,"y":3,"type":"king","plr":1},{"x":4,"y":3,"type":"archer","plr":1},
			{"x":2,"y":4,"type":"archer","plr":1},{"x":3,"y":4,"type":"archer","plr":1},{"x":4,"y":4,"type":"archer","plr":1},
			{"x":6,"y":6,"type":"archer","plr":2},{"x":7,"y":6,"type":"archer","plr":2},{"x":8,"y":6,"type":"archer","plr":2},
			{"x":6,"y":7,"type":"archer","plr":2},{"x":7,"y":7,"type":"king","plr":2},{"x":8,"y":7,"type":"archer","plr":2},
			{"x":6,"y":8,"type":"archer","plr":2},{"x":7,"y":8,"type":"archer","plr":2},{"x":8,"y":8,"type":"archer","plr":2}
		],
		"nokings": [
			{"x":2,"y":2,"type":"archer","plr":1},{"x":3,"y":2,"type":"archer","plr":1},{"x":4,"y":2,"type":"archer","plr":1},
			{"x":2,"y":3,"type":"archer","plr":1},{"x":3,"y":3,"type":"archer","plr":1},{"x":4,"y":3,"type":"archer","plr":1},
			{"x":2,"y":4,"type":"archer","plr":1},{"x":3,"y":4,"type":"archer","plr":1},{"x":4,"y":4,"type":"archer","plr":1},
			{"x":6,"y":6,"type":"archer","plr":2},{"x":7,"y":6,"type":"archer","plr":2},{"x":8,"y":6,"type":"archer","plr":2},
			{"x":6,"y":7,"type":"archer","plr":2},{"x":7,"y":7,"type":"archer","plr":2},{"x":8,"y":7,"type":"archer","plr":2},
			{"x":6,"y":8,"type":"archer","plr":2},{"x":7,"y":8,"type":"archer","plr":2},{"x":8,"y":8,"type":"archer","plr":2}
		]
	},
	"queries": {
		"myunits": ["FILTER","UNITS",{"plr":["TURNVAR","CURRENTPLAYER"]}],
		"oppunits": ["FILTER","UNITS",{"plr":["ISNT",["TURNVAR","CURRENTPLAYER"]]}],
		"opptargets": ["MERGE","oppunits",{"id":"targetid"},"bullseye",{"id":"shooterid"}],
		"opponentbase": ["FILTER","TERRAIN",{"type":"base","plr":["ISNT",["TURNVAR","CURRENTPLAYER"]]}],
		"killedoppking": ["FILTER","DEADUNITS",{"type":"king","plr":["ISNT",["TURNVAR","CURRENTPLAYER"]]}],
		"infiltrators": ["MERGE","myunits",{"id":"id"},"opponentbase",{}],
		"gonnakill": ["FILTER","optargets",{"shooterid":["IDAT","selectunit"]}]
	},
	"generators": {
		"arrows": {
			"type": "walker",
			"from": "UNITS",
			"dirs": [1],
			"relativeto": ["DIRAT","START"],
			"stops": "UNITS",
			"max": 3,
			"stepname": ["IFELSE",["SAME",["ARTIFACT","plr"],["TURN","CURRENTPLAYER"]],"myarrows","opparrows"],
			"stopname": ["IF",["AND",["ANYAT","UNITS","TARGET"],["DIFFERENT",["LOOKUP","UNITS","TARGET","plr"],["LOOKUP","UNITS","START","plr"]]],"bullseye"],
			"include": ["LOOKUPALL","UNITS","START",["id","plr"]]
		},
		"footing": {
			"type": "offset",
			"from": "myunits",
			"dirs": [1,5],
			"relativeto": ["DIRAT","START"],
			"forward": 1,
			"name": ["IF",["NONEAT","UNITS","TARGET"],["IFELSE",["SAME",["ARTIFACT","originaldir"],1],"forwardfooting","backwardfooting"]],
			"include": {"id":["IDAT","START"]}
		}
	},
	"marks": {
		"selectunit": "myunits"
	},
	"endturn": {
		"condition":["SAME",["TURNVAR","moves"],2],
		"commandcap": true,
		"passto": ["IFELSE",["SAME",["TURNVAR","CURRENTPLAYER"],1],2,1]
	},
	"endgameconditions": {
		"infiltration":[["NOTEMPTY","infiltrators"],["TURNVAR","CURRENTPLAYER"]],
		"kingkill":[["NOTEMPTY","killedoppking"],["TURNVAR","CURRENTPLAYER"]]
	},
	"commands": {
		"stepforward": {
			"condition": ["MATCHAT","forwardfooting",["OFFSET","selectunit",["DIRAT","selectunit"],{"forward":1}],{"id":["IDAT","selectunit"]}],
			"effects": [
				["MOVEUNIT",["IDAT","selectunit"],["OFFSET","selectunit",["DIRAT","selectunit"],{"forward":1}]],
				["SETTURNVARIABLE","moves",["SUM",["TURNVAR","moves"],1]],
				["SETUNITTURNVAR",["IDAT","selectunit"],"moved",true]
			]
		},
		"stepbackward": {
			"condition": ["MATCHAT","backwardfooting",["OFFSET","selectunit",["DIRAT","selectunit"],{"forward":-1}],{"id":["IDAT","selectunit"]}],
			"effects": [
				["MOVEUNIT",["IDAT","selectunit"],["OFFSET","selectunit",["DIRAT","selectunit"],{"forward":-1}]],
				["SETTURNVARIABLE","moves",["SUM",["TURNVAR","moves"],1]],
				["SETUNITTURNVAR",["IDAT","selectunit"],"moved",true]
			]
		},
		"turnleft": {
			"effects": [
				["SETUNITVARIABLE",["IDAT","selectunit"],"dir",["TURN",["DIRAT","selectunit"],-1]],
				["SETTURNVARIABLE","moves",["SUM",["TURNVAR","moves"],1]]
			]
		},
		"turnright": {
			"effects": [
				["SETUNITVARIABLE",["IDAT","selectunit"],"dir",["TURN",["DIRAT","selectunit"],1]],
				["SETTURNVARIABLE","moves",["SUM",["TURNVAR","moves"],1]]
			]
		},
		"fire": {
			"conditions": [
				["NOTEMPTY","gonnakill"],
				["DIFFERENT",["UNITTURN",["IDAT","selectunit"],"moved",true]]
			],
			"effects": [
				["KILLUNIT",["LOOKUP","gonnakill",["ONLYIN","gonnakill"],"targetid"]],
				["SETUNITTURNVAR",["IDAT","selectunit"],"moved",true]
			]
		}
	}
}